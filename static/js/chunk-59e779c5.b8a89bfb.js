(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59e779c5"],{"0c6d":function(e,t,a){"use strict";a("d3b7");var s=a("bc3a"),i=a.n(s),r=a("5c96"),n=a("4360"),o=a("2f4d"),l=void 0,c=i.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(e){return Object(o["a"])()&&(e.headers["token"]=Object(o["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(r["Message"])({message:t.message||"Error",type:"error",duration:5e3}),20002===t.code&&(Object(o["c"])(),Object(o["d"])(),l.$router.push("/login")),50008!==t.code&&50012!==t.code&&50014!==t.code||r["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){n["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(r["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=c},1539:function(e,t,a){"use strict";a("7512")},"1b62":function(e,t,a){"use strict";var s=a("2f4d");t["a"]={data:function(){return{uploadFileOss:"/lejuAdmin/material/uploadFileOssSave",uploadUrl1:"/lejuAdmin/material/uploadFileOss",uploadUrl:"/lejuAdmin/material/uploadFileOssSave",uploadHeaders:{token:Object(s["a"])()},pagniationParams:{start:1,limit:10,totalNum:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"loading.....",spinner:"el-icon-loading"}}},computed:{token:function(){return{token:Object(s["a"])()}}}}},2332:function(e,t,a){"use strict";a("67f6")},4447:function(e,t,a){"use strict";a("ef82")},"67f6":function(e,t,a){},7512:function(e,t,a){},"782b":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return u}));a("99af");var s=a("0c6d");function i(){return Object(s["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function r(e){return Object(s["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:e})}function n(e,t){return Object(s["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(e,"/").concat(t),method:"get"})}function o(e){return Object(s["a"])({url:"/lejuAdmin/brand/delBrand/".concat(e),method:"delete"})}function l(e){return Object(s["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:e})}function u(){return Object(s["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}},8256:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[a("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),a("div",{staticClass:"editor-custom-btn-container"},[a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini",icon:"el-icon-upload"}},[e._v(" 上传图片 "),a("input",{staticClass:"ipt-file",attrs:{type:"file"},on:{change:function(t){return e.fileChange(t)}}})])],1)])},i=[],r=(a("b680"),a("a9e3"),a("ac1f"),a("00b4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-container"},[a("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" upload ")]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v(" Click upload ")])],1),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" Cancel ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" Confirm ")])],1)],1)}),n=[],o=(a("d3b7"),a("b64b"),a("d81d"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var a=t.uid,s=Object.keys(this.listObj),i=0,r=s.length;i<r;i++)if(this.listObj[s[i]].uid===a)return this.listObj[s[i]].url=e.files.file,void(this.listObj[s[i]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,a=Object.keys(this.listObj),s=0,i=a.length;s<i;s++)if(this.listObj[a[s]].uid===t)return void delete this.listObj[a[s]]},beforeUpload:function(e){var t=this,a=window.URL||window.webkitURL,s=e.uid;return this.listObj[s]={},new Promise((function(i,r){var n=new Image;n.src=a.createObjectURL(e),n.onload=function(){t.listObj[s]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},i(!0)}))}}}),l=o,c=(a("2332"),a("2877")),u=Object(c["a"])(l,r,n,!1,null,"8e4d474a",null),d=u.exports,m=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],p=m,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],b=f,h=a("b85c"),g=[];function v(){return window.tinymce}var k=function(e,t){var a=document.getElementById(e),s=t||function(){};if(!a){var i=document.createElement("script");i.src=e,i.id=e,document.body.appendChild(i),g.push(s);var r="onload"in i?n:o;r(i)}function n(t){t.onload=function(){this.onerror=this.onload=null;var e,a=Object(h["a"])(g);try{for(a.s();!(e=a.n()).done;){var s=e.value;s(null,t)}}catch(i){a.e(i)}finally{a.f()}g=null},t.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+e),t)}}function o(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,a=Object(h["a"])(g);try{for(a.s();!(t=a.n()).done;){var s=t.value;s(null,e)}}catch(i){a.e(i)}finally{a.f()}g=null}}}a&&s&&(v()?s(null,a):g.push(s))},y=k,w=a("bc3a"),C=a.n(w),x=a("2f4d"),S=a("1b62"),j="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",_={name:"Tinymce",components:{editorImage:d,getToken:x["a"]},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},mixins:[S["a"]],data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{fileChange:function(e){var t=this,a=e.target.files,s=a[0],i=new FormData;i.append("file",s),C.a.post(this.uploadFileOss,i,{headers:this.token}).then((function(e){var a=e.data,s=a.success,i=a.data,r=a.message;s?t.imageSuccessCBK(i.material.ossUrl):t.$message.err(r)}))},init:function(){var e=this;y(j,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:b,menubar:this.menubar,plugins:p,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(a){t.value&&a.setContent(t.value),t.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",a.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},images_upload_handler:function(e,a,s,i){i(0);var r=new FormData;r.append("file",e.blob()),C.a.post(t.uploadFileOss,r,{headers:t.token}).then((function(e){var t=e.data,r=t.success,n=t.data,o=t.message;r?a(n.material.ossUrl):(s(o),i(100))}))},convert_urls:!1})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){window.tinymce.get(this.tinymceId).insertContent('<img class="wscnph" src="'.concat(e,'" >'))}}},O=_,I=(a("1539"),Object(c["a"])(O,s,i,!1,null,"4ba932b7",null));t["a"]=I.exports},a15b:function(e,t,a){"use strict";var s=a("23e7"),i=a("44ad"),r=a("fc6a"),n=a("a640"),o=[].join,l=i!=Object,c=n("join",",");s({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(r(this),void 0===e?",":e)}})},aab4:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var s=a("0c6d");function i(e){return Object(s["a"])({url:"/lejuAdmin/category/getAllCategory",method:"get",data:e})}function r(e){return Object(s["a"])({url:"/lejuAdmin/category/getAllCategory",method:"get",data:e})}},b191:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return r}));a("99af");var s=a("0c6d");function i(e,t,a){return Object(s["a"])({url:"/lejuAdmin/product/productsByPage/".concat(e,"/").concat(t),method:"post",data:a})}function r(e){return Object(s["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:e})}},cdec:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"detail-main",attrs:{"element-loading-text":e.loadingOption.text,"element-loading-spinner":e.loadingOption.spinner,"element-loading-background":e.loadingOption.background}},[a("div",{staticClass:"step_main"},[a("el-steps",{staticClass:"step-bar",attrs:{active:e.step,"finish-status":"success"}},[a("el-step",{attrs:{title:"商品基本信息"}}),a("el-step",{attrs:{title:"添加库存信息"}}),a("el-step",{attrs:{title:"添加移动端详情"}})],1)],1),a("el-card",{staticClass:"box-card card",attrs:{shadow:"never"}},[a("div",{staticClass:"header"}),a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}]},[a("div",{staticClass:"form-section-head"},[e._v(" 基本信息 ")]),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"name",label:"商品名称",size:"small"}},[a("el-input",{staticClass:"myInput",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"productSn",label:"商品编码",size:"small"}},[a("el-input",{staticClass:"myInput",model:{value:e.form.productSn,callback:function(t){e.$set(e.form,"productSn",t)},expression:"form.productSn"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"productCategoryId",label:"商品分类",size:"small"}},[a("el-select",{staticClass:"myInput",attrs:{placeholder:"商品分类",clearable:""},model:{value:e.form.productCategoryId,callback:function(t){e.$set(e.form,"productCategoryId",t)},expression:"form.productCategoryId"}},e._l(e.productCategoryList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品品牌",size:"small",prop:"brandId"}},[a("el-select",{staticClass:"myInput",attrs:{clearable:"",placeholder:"品牌"},model:{value:e.form.brandId,callback:function(t){e.$set(e.form,"brandId",t)},expression:"form.brandId"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:16,offset:0}},[a("el-form-item",{attrs:{label:"商品描述",size:"small"}},[a("el-input",{staticClass:"myInput",attrs:{type:"textarea",placeholder:"商品描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1),a("div",{staticClass:"form-section-head"},[e._v(" 商品属性 ")]),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品原价",size:"small",prop:"originalPrice"}},[a("el-input-number",{staticClass:"myInput",attrs:{placeholder:"商品原价"},on:{input:e.originalPriceChange},model:{value:e.form.originalPrice,callback:function(t){e.$set(e.form,"originalPrice",t)},expression:"form.originalPrice"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"促销类型",size:"small"}},[a("el-select",{staticClass:"myInput",attrs:{placeholder:"促销类型",clearable:"",disabled:""},model:{value:e.form.promotionType,callback:function(t){e.$set(e.form,"promotionType",t)},expression:"form.promotionType"}},e._l(e.promotionTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"活动价格",size:"small"}},[a("el-input-number",{staticClass:"myInput",attrs:{disabled:"",placeholder:"当前价格",type:"number"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"重量(kg)",size:"small",prop:"weight"}},[a("el-input-number",{staticClass:"myInput",attrs:{placeholder:"重量"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}})],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{label:"审核状态",size:"small"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.verifyStatus,callback:function(t){e.$set(e.form,"verifyStatus",t)},expression:"form.verifyStatus"}})],1)],1),a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{label:"是否上架",size:"small"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.publishStatus,callback:function(t){e.$set(e.form,"publishStatus",t)},expression:"form.publishStatus"}})],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-form-item",{attrs:{label:"缩略图",size:"small",prop:"pic"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.form.pic?a("img",{staticClass:"avatar",attrs:{src:e.form.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("div",{staticClass:"form-section-head"},[e._v(" 其他信息 ")]),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{label:"推荐状态",size:"small"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.recommendStatus,callback:function(t){e.$set(e.form,"recommendStatus",t)},expression:"form.recommendStatus"}})],1)],1),a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{label:"新品状态",size:"small"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.newStatus,callback:function(t){e.$set(e.form,"newStatus",t)},expression:"form.newStatus"}})],1)],1),a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{label:"预告商品",size:"small"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.previewStatus,callback:function(t){e.$set(e.form,"previewStatus",t)},expression:"form.previewStatus"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"搜索关键词",size:"small","label-width":"100px"}},[a("el-input",{staticClass:"myInput",attrs:{placeholder:"关键词"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"库存预警",size:"small",prop:"lowStock"}},[a("el-input-number",{staticClass:"myInput",model:{value:e.form.lowStock,callback:function(t){e.$set(e.form,"lowStock",t)},expression:"form.lowStock"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品排序",size:"small",prop:"sort"}},[a("el-input-number",{staticClass:"myInput",attrs:{placeholder:"排序"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),a("el-col",{attrs:{span:16,offset:0}},[a("el-form-item",{attrs:{label:"产品服务",size:"small"}},[a("el-checkbox-group",{model:{value:e.serviceIds,callback:function(t){e.serviceIds=t},expression:"serviceIds"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[e._v("无忧退货")]),a("el-checkbox",{attrs:{label:"2",name:"type"}},[e._v("快速退款")]),a("el-checkbox",{attrs:{label:"3",name:"type"}},[e._v("免费包邮")])],1)],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}]},[a("div",{staticClass:"form-section-head"},[e._v(" 商品sku信息 ")]),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{label:"标题",size:"small",prop:"detailTitle"}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:e.form.detailTitle,callback:function(t){e.$set(e.form,"detailTitle",t)},expression:"form.detailTitle"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"副标题",size:"small",prop:"detailDesc"}},[a("el-input",{attrs:{placeholder:"副标题"},model:{value:e.form.detailDesc,callback:function(t){e.$set(e.form,"detailDesc",t)},expression:"form.detailDesc"}})],1)],1)],1),a("el-form-item",{staticClass:"albumPics",attrs:{label:"画册图片",size:"small"}},[a("el-upload",{attrs:{action:e.uploadUrl,"on-remove":e.handleRemove,"file-list":e.fileList,"on-success":e.imgUploadSuccess,limit:5,"on-preview":e.handlePictureCardPreview,"list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"}),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb,文件不超过5个 ")])],1)],1),a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"sku设置"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.skuColorList.length>0,expression:"skuColorList.length > 0"}],staticStyle:{display:"flex"}},[e._v(" 颜色： "),a("el-checkbox-group",{model:{value:e.skuColorSel,callback:function(t){e.skuColorSel=t},expression:"skuColorSel"}},e._l(e.skuColorList,(function(t,s){return a("el-checkbox",{key:s,attrs:{label:t}},[a("span",[e._v(e._s(t.text))]),a("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.delParam(t,"skuColorList","skuColorSel")}}},[e._v("删除")])],1)})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.skuCapacityList.length>0,expression:"skuCapacityList.length > 0"}],staticStyle:{display:"flex"}},[e._v(" 大小： "),a("el-checkbox-group",{model:{value:e.skuCapacitySel,callback:function(t){e.skuCapacitySel=t},expression:"skuCapacitySel"}},e._l(e.skuCapacityList,(function(t,s){return a("el-checkbox",{key:s,attrs:{label:t}},[a("span",[e._v(e._s(t.text))]),a("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.delParam(t,"skuCapacityList","skuCapacitySel")}}},[e._v("删除")])],1)})),1)],1),a("div",{staticClass:"sku_flex"},[a("div",[a("el-input",{staticClass:"sku_flex_item",staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"颜色描述：比如土豪金"},model:{value:e.skuColorObj.text,callback:function(t){e.$set(e.skuColorObj,"text",t)},expression:"skuColorObj.text"}}),a("el-button",{staticClass:"sku_flex_item",attrs:{size:"small"},on:{click:function(t){return e.addSkuObj("skuColorObj","skuColorList")}}},[e._v("创建颜色选项")])],1),a("div",[a("el-input",{staticClass:"sku_flex_item",staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"大小"},model:{value:e.skuCapacityObj.text,callback:function(t){e.$set(e.skuCapacityObj,"text",t)},expression:"skuCapacityObj.text"}}),a("el-button",{staticClass:"sku_flex_item",attrs:{size:"small"},on:{click:function(t){return e.addSkuObj("skuCapacityObj","skuCapacityList")}}},[e._v("创建大小选项 ")])],1),a("div",{staticStyle:{"margin-left":"200px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createSkus}},[e._v("生成sku列表")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.createSkus("add")}}},[e._v("新增sku")])],1)]),a("div",{staticClass:"sku_table"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.skuList.length>0,expression:"skuList.length > 0"}],attrs:{size:"mini",data:e.skuList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",fixed:"left"}}),a("el-table-column",{attrs:{label:"图片",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-upload",{staticStyle:{width:"100px",height:"100px"},attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleTableSuccess},nativeOn:{click:function(a){return e.getTableItem(t.row)}}},[t.row.pic?a("img",{staticClass:"avatar",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"100px",height:"100px","margin-top":"-31px"}})])]}}])}),a("el-table-column",{attrs:{label:"颜色",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.spData[0].value,callback:function(a){e.$set(t.row.spData[0],"value",a)},expression:"scope.row.spData[0].value"}})]}}])}),a("el-table-column",{attrs:{label:"大小",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.spData[1]?a("el-input",{attrs:{size:"mini"},model:{value:t.row.spData[1].value,callback:function(a){e.$set(t.row.spData[1],"value",a)},expression:"scope.row.spData[1].value"}}):e._e()]}}])}),a("el-table-column",{attrs:{label:"库存",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"自定义库存"},model:{value:t.row.stock,callback:function(a){e.$set(t.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),a("el-table-column",{attrs:{label:"预警库存",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"预警库存"},model:{value:t.row.lowStock,callback:function(a){e.$set(t.row,"lowStock",a)},expression:"scope.row.lowStock"}})]}}])}),a("el-table-column",{attrs:{label:"锁定库存",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"锁定库存"},model:{value:t.row.lockStock,callback:function(a){e.$set(t.row,"lockStock",a)},expression:"scope.row.lockStock"}})]}}])}),a("el-table-column",{attrs:{label:"sku编码",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"自定义sku编码"},model:{value:t.row.skuCode,callback:function(a){e.$set(t.row,"skuCode",a)},expression:"scope.row.skuCode"}})]}}])}),a("el-table-column",{attrs:{label:"价格",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"价格,单位:分"},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}})]}}])}),a("el-table-column",{attrs:{label:"销量",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.sale,callback:function(a){e.$set(t.row,"sale",a)},expression:"scope.row.sale"}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.removeSku(t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.step,expression:"step === 3"}]},[a("div",{staticClass:"form-section-head"},[e._v(" 详情描述 ")]),a("el-form-item",{attrs:{size:"small",label:"商品详情"}},[a("TinEditor",{ref:"tin"})],1),a("el-form-item",{attrs:{label:"备注",size:"small"}},[a("el-input",{staticClass:"myInput",attrs:{type:"textarea",placeholder:"备注"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("div",{staticClass:"bottom_main"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.step>1,expression:"step > 1"}],staticClass:"submit_button",attrs:{size:"small"},on:{click:e.preBtn}},[e._v("返回上一步 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.step<3,expression:"step < 3"}],staticClass:"submit_button",attrs:{size:"small",type:"primary"},on:{click:e.nextBtn}},[e._v(e._s(e.nextBtnText)+" ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3==e.step,expression:"step == 3"}],staticClass:"submit_button",attrs:{size:"small",type:"primary",loading:e.couldNext},on:{click:e.onSubmit}},[e._v("提交保存")])],1)])],1)],1)},i=[],r=a("5530"),n=a("c7eb"),o=a("1da1"),l=(a("d3b7"),a("159b"),a("b0c0"),a("4de4"),a("e9c4"),a("d81d"),a("a15b"),a("aab4")),c=a("1b62"),u=a("782b"),d=a("b191"),m=a("8256"),p={name:"AddGoods",components:{TinEditor:m["a"]},mixins:[c["a"]],data:function(){return{pageLoading:!1,couldNext:!1,step:1,id:"",skuList:[],tempSkuList:[],tempTableObj:{},skuParamsList:[],skuColorObj:{},skuColorList:[],skuColorSel:[],skuCapacityObj:{},skuCapacityList:[],skuCapacitySel:[],brandList:[],productCategoryList:[],promotionTypeList:[{name:"没有促销使用原价",id:0},{name:"使用促销价",id:1},{name:"使用会员价",id:2},{name:"使用阶梯价格",id:3},{name:"使用满减价格",id:4},{name:"限时购",id:5}],form:{productSn:"",name:"",brandId:"",price:"",originalPrice:"",sort:"",keywords:"",description:"",note:"",deleteStatus:"0",newStatus:"0",previewStatus:"0",publishStatus:"0",recommendStatus:"1",verifyStatus:"1",weight:"",detailTitle:"",detailDesc:"",pic:"",lowStock:"",productAttributeCategoryId:"",productCategoryId:"",promotionType:0},dialogImageUrl:"",dialogVisible:!1,serviceIds:[],imgList:[],fileList:[],firstPageValidFiles:["name","productSn","productCategoryId","brandId","originalPrice","weight","pic","lowStock","sort"],secondPageValidFiles:["detailTitle","detailDesc"],rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],productSn:[{required:!0,message:"请输入商品编码",trigger:"blur"}],productCategoryId:[{required:!0,message:"请选择商品分类",trigger:"change"}],brandId:[{required:!0,message:"请选择商品品牌",trigger:"change"}],originalPrice:[{required:!0,pattern:/1/,message:"商品原价要求为大于 0 的数",trigger:"blur",transform:function(e){return e>0?"1":"0"}}],weight:[{required:!0,pattern:/1/,message:"商品重量要求为大于 0 的数",transform:function(e){return e>0?"1":"0"},trigger:"blur"}],pic:[{required:!0,message:"请上传缩略图"}],lowStock:[{required:!0,pattern:/1/,message:"库存预警要求为大于 0 的数",transform:function(e){return e>0?"1":"0"},trigger:"blur"}],sort:[{required:!0,pattern:/1/,message:"商品排序要求为大于 0 的数",transform:function(e){return e>0?"1":"0"},trigger:"blur"}],detailTitle:[{required:!0,message:"请填写标题",trigger:"blur"}],detailDesc:[{required:!0,message:"请填写副标题",trigger:"blur"}]}}},computed:{nextBtnText:function(){var e="";switch(this.step){case 1:e="下一步,填写库存信息";break;case 2:e="下一步,填写移动端详情";break;default:break}return e}},created:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id=e.$route.params.id,t.next=3,e.getCategory1();case 3:return t.next=5,e.getBrandList();case 5:e.id&&e.getDetail();case 6:case"end":return t.stop()}}),t)})))()},methods:{originalPriceChange:function(e){this.form.price=e},getTableItem:function(e){this.tempTableObj=e},getDetail:function(){var e=this;this.pageLoading=!0,Object(d["productDetail"])(this.id).then((function(t){if(e.form=t.data.product,t.data.skus.forEach((function(t){e.skuList.push(Object(r["a"])(Object(r["a"])({},t),{},{spData:JSON.parse(t.spData)})),e.tempSkuList.push(Object(r["a"])(Object(r["a"])({},t),{},{spData:JSON.parse(t.spData)}))})),e.form.albumPics){var a=e.form.albumPics.split(",");a.forEach((function(t){e.fileList.push({url:t})}))}e.form.serviceIds&&e.form.serviceIds.length>0&&(e.serviceIds=e.form.serviceIds.split(",")),e.setTin(e.form.detailMobileHtml),e.pageLoading=!1})).catch((function(t){e.$message.error(t),e.pageLoading=!1}))},getCategory1:function(){var e=this;Object(l["b"])().then((function(t){console.log(t),t.success&&t.data.items.forEach((function(t){"乐居"===t.category.name&&(e.productCategoryList=t.children)}))})).catch((function(e){console.log(e)}))},createSkus:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){var s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(t.skuColorSel.length<=0)){a.next=3;break}return t.$message.error("请选中颜色"),a.abrupt("return");case 3:if(s={pic:"",price:t.form.price,sale:"",skuCode:"100000",stock:"",lowStock:""},"add"===e){a.next=7;break}return a.next=7,t.$confirm("此操作将清空sku列表,并生成新的列表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.skuList=[],t.$message({type:"success",message:"创建成功!"})}));case 7:t.skuCapacitySel.length>0?t.skuColorSel.forEach((function(e){t.skuCapacitySel.forEach((function(a){var i=[{key:"颜色",value:e.text},{key:"大小",value:a.text}];t.skuList.push(Object(r["a"])({spData:i,tempId:""},s))}))})):t.skuColorSel.forEach((function(e){var a=[{key:"颜色",value:e.text}];t.skuList.push(Object(r["a"])({spData:a,tempId:""},s))}));case 8:case"end":return a.stop()}}),a)})))()},removeSku:function(e){e.tempId?this.skuList=this.skuList.filter((function(t){return t.tempId!=e.tempId})):this.skuList=this.skuList.filter((function(t){return t.id!=e.id}))},delParam:function(e,t,a){this[a]=this[a].filter((function(t){return t.tempId!=e.tempId})),this[t]=this[t].filter((function(t){return t.tempId!=e.tempId}))},addSkuObj:function(e,t){var a=Object.assign({tempId:""},this[e]);this[t].push(a),this[e]={}},handleAvatarSuccess:function(e,t){this.form.pic=e.data.fileUrl},handleTableSuccess:function(e,t){var a=this;this.skuList.forEach((function(t){t===a.tempTableObj&&(t.pic=e.data.fileUrl)}))},handleRemove:function(e,t){this.fileList=this.fileList.filter((function(t){return t.url!=e.url}))},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},imgUploadSuccess:function(e,t){e.success?(this.fileList.push({url:e.data.fileUrl}),this.$message.success("上传成功")):this.$message.error("上传失败")},getBrandList:function(){var e=this;Object(u["b"])().then((function(t){console.log(t),e.brandList=t.data.items})).catch((function(e){console.log("error",e)}))},onSubmit:function(){var e=this,t="",a="";this.brandList.forEach((function(a){a.id===e.form.brandId&&(t=a.name)})),this.productCategoryList.forEach((function(t){t.id===e.form.productCategoryId&&(a=t.name)})),this.$refs.form.validate((function(s){if(!s)return e.$message.error("请填写必要信息"),!1;e.couldNext=!0;var i=e.getTin(),n=[];e.skuList.forEach((function(e){e.tempId&&delete e.tempId,n.push(Object(r["a"])(Object(r["a"])({},e),{},{spData:JSON.stringify(e.spData)}))}));var o=e.fileList.map((function(e){return e.url}));e.id?Object(d["updateProductAndSkus"])({pmsSkuStockList:n,product:Object(r["a"])(Object(r["a"])({},e.form),{},{brandName:t,productCategoryName:a,detailMobileHtml:i,albumPics:o.join(","),serviceIds:e.serviceIds.join(",")})}).then((function(t){t.success&&(e.$message.success("修改成功"),e.$router.push({path:"/product/list"})),e.couldNext=!1})).catch((function(t){console.log(t),e.couldNext=!1,e.$message.error("添加失败")})):Object(d["a"])({pmsSkuStockList:n,product:Object(r["a"])(Object(r["a"])({},e.form),{},{brandName:t,productCategoryName:a,detailMobileHtml:i,albumPics:o.join(","),serviceIds:e.serviceIds.join(",")})}).then((function(t){t.success&&(e.$message.success("新增成功"),e.$router.push({path:"/product/list"})),e.couldNext=!1})).catch((function(t){e.couldNext=!1,console.log(t),e.$message.error("添加失败")}))}))},nextBtn:function(){var e=!0,t=[];1==this.step?t=this.firstPageValidFiles:2==this.step&&(t=this.secondPageValidFiles),this.$refs.form.validateField(t,(function(t){e=t?e&&!1:e&&!0})),e?this.step++:this.$message.error("请注意表单验证！！！")},preBtn:function(){this.step--},getTin:function(){var e=this.$refs.tin.getContent();return e},setTin:function(e){this.$refs.tin.setDelayContent(e)}}},f=p,b=(a("4447"),a("2877")),h=Object(b["a"])(f,s,i,!1,null,"66953095",null);t["default"]=h.exports},ef82:function(e,t,a){}}]);