(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-456e4177"],{"0c6d":function(t,e,a){"use strict";a("d3b7");var i=a("bc3a"),n=a.n(i),r=a("5c96"),s=a("4360"),o=a("2f4d"),l=void 0,c=n.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(t){return Object(o["a"])()&&(t.headers["token"]=Object(o["a"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),c.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(r["Message"])({message:e.message||"Error",type:"error",duration:5e3}),20002===e.code&&(Object(o["c"])(),Object(o["d"])(),l.$router.push("/login")),50008!==e.code&&50012!==e.code&&50014!==e.code||r["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){s["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(r["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=c},"1b62":function(t,e,a){"use strict";var i=a("2f4d");e["a"]={data:function(){return{uploadFileOss:"/lejuAdmin/material/uploadFileOssSave",uploadUrl1:"/lejuAdmin/material/uploadFileOss",uploadUrl:"/lejuAdmin/material/uploadFileOssSave",uploadHeaders:{token:Object(i["a"])()},pagniationParams:{start:1,limit:10,totalNum:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"loading.....",spinner:"el-icon-loading"}}},computed:{token:function(){return{token:Object(i["a"])()}}}}},"80f9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"marterial-main"},[a("el-card",{staticClass:"margin-30",attrs:{shadow:"always"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-upload",{ref:"upload",attrs:{action:"/lejuAdmin/material/uploadFileOssSave",multiple:"",limit:2,headers:t.token,"on-exceed":t.exceedChange(),"on-success":t.marterialUploadSucc}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("上传素材")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("jpg/png files with a size less than 500kb")])],1)],1),a("el-row",{attrs:{gutter:20}},t._l(t.list,(function(e){return a("el-col",{key:e.id,staticStyle:{width:"20%","margin-bottom":"20px"}},[a("el-card",{attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v(" 创建时间: "+t._s(e.createTime)+" ")])]),a("el-image",{staticStyle:{display:"block",margin:"0 auto",width:"100px",height:"100px"},attrs:{"preview-src-list":t.previewSrcList,src:e.ossUrl}}),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleteMaterialById(e.id)}}},[t._v("删除")])],1)],1)})),1),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"page-size":t.pagniationParams.limit,total:t.pagniationParams.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":t.pagniationParams.pageSizes,"current-page":t.pagniationParams.start},on:{"update:currentPage":function(e){return t.$set(t.pagniationParams,"start",e)},"update:current-page":function(e){return t.$set(t.pagniationParams,"start",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],r=(a("d81d"),a("1b62")),s=(a("99af"),a("0c6d"));function o(t,e){return Object(s["a"])({url:"/lejuAdmin/material/findMaterialByPage/".concat(t,"/").concat(e),method:"get"})}var l={mixins:[r["a"]],name:"material",data:function(){return{list:[],previewSrcList:[]}},created:function(){this.getMaterialList()},mounted:function(){},methods:{marterialUploadSucc:function(t){console.log(t),this.getMaterialList()},exceedChange:function(){console.log("超出图片个数")},getMaterialList:function(){var t=this;o(this.pagniationParams.start,this.pagniationParams.limit).then((function(e){var a=e.success,i=e.data,n=e.message;if(a){var r=i.total;t.list=i.rows,t.pagniationParams.total=r,t.previewSrcList=i.rows.map((function(t){return t.ossUrl}))}else t.$message.error(n)}))},deleteMaterialById:function(t){},handleSizeChange:function(t){this.limit=t,this.start=1,this.getMaterialList()},handleCurrentChange:function(t){this.start=t,this.getMaterialList()}}},c=l,u=(a("c7b3"),a("2877")),d=Object(u["a"])(c,i,n,!1,null,"d84e9738",null);e["default"]=d.exports},"8d20":function(t,e,a){},c7b3:function(t,e,a){"use strict";a("8d20")}}]);