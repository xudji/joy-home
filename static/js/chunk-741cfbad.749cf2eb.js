(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-741cfbad"],{"0c6d":function(t,e,a){"use strict";a("d3b7");var o=a("bc3a"),n=a.n(o),r=a("5c96"),s=a("4360"),i=a("2f4d"),l=void 0,c=n.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(t){return Object(i["a"])()&&(t.headers["token"]=Object(i["a"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),c.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(r["Message"])({message:e.message||"Error",type:"error",duration:5e3}),20002===e.code&&(Object(i["c"])(),Object(i["d"])(),l.$router.push("/login")),50008!==e.code&&50012!==e.code&&50014!==e.code||r["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){s["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(r["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=c},"1b62":function(t,e,a){"use strict";var o=a("2f4d");e["a"]={data:function(){return{uploadFileOss:"/lejuAdmin/material/uploadFileOssSave",uploadUrl1:"/lejuAdmin/material/uploadFileOss",uploadUrl:"/lejuAdmin/material/uploadFileOssSave",uploadHeaders:{token:Object(o["a"])()},pagniationParams:{start:1,limit:10,totalNum:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"loading.....",spinner:"el-icon-loading"}}},computed:{token:function(){return{token:Object(o["a"])()}}}}},"782b":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"g",(function(){return c})),a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return n})),a.d(e,"b",(function(){return d}));a("99af");var o=a("0c6d");function n(){return Object(o["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function r(t){return Object(o["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function s(t,e){return Object(o["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e),method:"get"})}function i(t){return Object(o["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function l(t){return Object(o["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}function d(){return Object(o["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}},"923a":function(t,e,a){"use strict";a("d274")},bba1:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"card",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.add}},[t._v("新增")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.brandList}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{fixed:"left",type:"index",prop:"date",label:"序号",align:"center"}}),a("el-table-column",{attrs:{label:"品牌名称",prop:"name",align:"center",width:"200"}}),a("el-table-column",{attrs:{label:"展示状态",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(" 是否展示: "),a("el-switch",{attrs:{size:"small","active-value":1,"inactive-value":0},on:{change:function(a){return t.switchCode(e.row)}},model:{value:e.row.showStatus,callback:function(a){t.$set(e.row,"showStatus",a)},expression:"scope.row.showStatus"}})],1)]}}])}),a("el-table-column",{attrs:{label:"logo",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table_img",attrs:{src:t.row.logo}})]}}])}),a("el-table-column",{attrs:{label:"专区大图",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table_img",attrs:{src:t.row.bigPic}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"brandStory",label:"品牌故事",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间",width:"300"}}),a("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"productCommentCount",label:"产品评论数量",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"productCount",label:"产品数量",width:"150"}}),a("el-table-column",{attrs:{align:"center",label:"是否品牌制造商",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(1===e.row.factoryStatus?"是":"不是"))])]}}])}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[a("span",[t._v("编辑")])]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.del(e.row)}}},[a("span",{staticStyle:{color:"red"}},[t._v("删除")])])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pagniationParams.currentPage,"page-sizes":t.pagniationParams.pageSizes,"page-size":t.pagniationParams.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.pagniationParams.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"品牌详情",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"广告名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"广告名称"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"首字母",prop:"note"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:t.addForm.firstLetter,callback:function(e){t.$set(t.addForm,"firstLetter",e)},expression:"addForm.firstLetter"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{placeholder:"排序"},model:{value:t.addForm.sort,callback:function(e){t.$set(t.addForm,"sort",e)},expression:"addForm.sort"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品数量",prop:"orderCount"}},[a("el-input",{attrs:{placeholder:"产品数量"},model:{value:t.addForm.productCount,callback:function(e){t.$set(t.addForm,"productCount",e)},expression:"addForm.productCount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否展示",prop:"status"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.addForm.showStatus,callback:function(e){t.$set(t.addForm,"showStatus",e)},expression:"addForm.showStatus"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否为品牌制造商",prop:"status"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.addForm.factoryStatus,callback:function(e){t.$set(t.addForm,"factoryStatus",e)},expression:"addForm.factoryStatus"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{size:"mini",label:"上传专区大图",prop:"pic"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl1,headers:t.uploadHeaders,"show-file-list":!1,"on-success":t.handleBigPicSuccess}},[t.addForm.bigPic?a("img",{staticClass:"avatar",attrs:{src:t.addForm.bigPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{size:"mini",label:"上传logo",prop:"pic"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl1,headers:t.uploadHeaders,"show-file-list":!1,"on-success":t.handleLogoPicSuccess}},[t.addForm.logo?a("img",{staticClass:"avatar",attrs:{src:t.addForm.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:10}},[a("el-form-item",[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){return t.resetForm("addFormRef")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("addFormRef")}}},[t._v("确 定")])],1)])],1)],1)],1)],1)],1)},n=[],r=a("782b"),s=a("1b62"),i={mixins:[s["a"]],data:function(){return{brandList:[],loading:!1,dialogVisible:!1,isEdit:!1,addForm:{detailObj:"",bigPic:"",logo:"",name:"",firstLetter:"",sort:"",productCount:"",productCommentCount:"",showStatus:1,factoryStatus:1},addFormRules:{name:[{required:!0,message:"请输入用户名称",trigger:"blur"}]}}},created:function(){this.getBrandList()},methods:{getBrandList:function(){var t=this;this.loading=!0,Object(r["c"])(this.pagniationParams.start,this.pagniationParams.limit).then((function(e){console.log("品牌列表",e),t.brandList=e.data.rows,t.pagniationParams.totalNum=e.data.total,t.loading=!1}))},add:function(){this.isEdit=!1,this.dialogVisible=!0,this.addForm=this.$options.data().addForm},edit:function(t){this.dialogVisible=!0,console.log(t),this.isEdit=!0,this.addForm=t,console.log(this.isEdit)},del:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["d"])(t.id).then((function(t){t.success?(e.getBrandList(),e.$message({type:"success",message:"删除成功!"})):e.$message.error(t.message)}))})).catch((function(t){console.log(t)}))},handleBigPicSuccess:function(t){this.addForm.bigPic=t.data.fileUrl,console.log(this.addForm.bigPic)},handleLogoPicSuccess:function(t){console.log(t),this.addForm.logo=t.data.fileUrl,console.log(this.addForm.logo)},submitForm:function(t){var e=this;this.$refs[t].validate((function(a){if(!a)return e.$message.error("请填写必要信息"),!1;e.$confirm("是否确认".concat(e.isEdit?"修改":"新增","广告"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.isEdit?Object(r["g"])(e.addForm).then((function(a){console.log(a),a.success?(e.getBrandList(),e.dialogVisible=!1,e.isEdit=!1,e.$refs[t].resetFields(),e.$message({type:"success",message:"修改成功!"})):e.$message.error(a.message)})):Object(r["a"])(e.addForm).then((function(a){console.log(a),a.success?(e.getBrandList(),e.dialogVisible=!1,e.$refs[t].resetFields(),e.$message({type:"success",message:"添加成功!"})):e.$message.error(a.message)}))})).catch((function(t){console.log(t)}))}))},resetForm:function(t){this.$refs[t].resetFields(),this.dialogVisible=!1,this.isEdit=!1},handleSizeChange:function(t){this.pagniationParams.limit=t,this.pagniationParams.start=1,this.getBrandList()},handleCurrentChange:function(t){this.pagniationParams.currentPage=t,this.getBrandList()},switchCode:function(t){var e=this,a=0===t.showStatus?1:0;Object(r["f"])({id:t.id+"",status:t.showStatus}).then((function(o){o.success?e.$message.success("修改状态成功"):(e.$message.error("修改状态失败"),t.showStatus=a)})).catch((function(o){t.showStatus=a,e.$message.error("修改状态失败")}))}}},l=i,c=(a("923a"),a("2877")),d=Object(c["a"])(l,o,n,!1,null,"fce10254",null);e["default"]=d.exports},d274:function(t,e,a){}}]);