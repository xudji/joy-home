(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bd125c1"],{"016d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("el-card",{staticClass:"margin-30",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.showAdlist}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.recommendsList.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"pic",label:"商品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px"},attrs:{src:t.row.pic,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"promotionStartTime,promotionEndTime",label:"活动时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 开始时间:"+t._s(e.row.promotionStartTime)+" "),a("br"),t._v(" 结束时间:"+t._s(e.row.promotionEndTime)+" ")]}}])}),a("el-table-column",{attrs:{prop:"promotionPerLimit",label:"是否过期",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("0"==e.row.promotionPerLimit?"过期":"1"==e.row.promotionPerLimit?"":"否")+" ")]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"brandName",label:"品牌名称",align:"center"}}),a("el-table-column",{attrs:{prop:"promotionPrice",label:"商品价格",align:"center"}}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.delRecommend(e.row.recommendId)}}},[t._v(" 删除 ")])]}}])})],1),a("el-pagination",{staticClass:"margin-top",attrs:{background:"","current-page":t.currentPage,"page-size":t.pagesize,total:t.totalListMedia,"page-sizes":[3,6,9,12,15,17],layout:"total, sizes, prev, pager, next, jumper",align:"right"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),a("AddAdlist",{ref:"AddAdlists",on:{refresh:t.getRecommends}})],1)},o=[],r=a("0c6d");function i(t){return Object(r["a"])({url:"/lejuAdmin/homeRecommend/findAllRecommends",method:"get",data:t})}function l(t){return Object(r["a"])({url:"/lejuAdmin/homeRecommend/delRecommend/".concat(t),method:"delete"})}function s(t){return Object(r["a"])({url:"/lejuAdmin/homeRecommend/addRecommend",method:"post",data:t})}var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"热销详情",visible:t.isShowDialog,width:"90%"},on:{"update:visible":function(e){t.isShowDialog=e}}},[a("el-card",{attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("条件查询")])]),a("el-form",{ref:"form",attrs:{model:t.search,size:"mini"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,offset:0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"商品名称/模糊查询"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"商品货号"},model:{value:t.search.productSn,callback:function(e){t.$set(t.search,"productSn",e)},expression:"search.productSn"}})],1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"品牌",clearable:"",filterable:""},model:{value:t.search.brandId,callback:function(e){t.$set(t.search,"brandId",e)},expression:"search.brandId"}},t._l(t.brandList,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"上架状态",clearable:"",filterable:""},model:{value:t.search.publishStatus,callback:function(e){t.$set(t.search,"publishStatus",e)},expression:"search.publishStatus"}},[a("el-option",{attrs:{value:"0",label:"下架"}}),a("el-option",{attrs:{value:"1",label:"上架"}})],1)],1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"审核状态",clearable:"",filterable:""},model:{value:t.search.verifyStatus,callback:function(e){t.$set(t.search,"verifyStatus",e)},expression:"search.verifyStatus"}},[a("el-option",{attrs:{value:"0",label:"未审核"}}),a("el-option",{attrs:{value:"1",label:"审核通过"}})],1)],1)],1),a("el-col",{attrs:{span:4,offset:0}},[a("el-form-item",[a("el-button",{on:{click:t.doReset}},[t._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:t.doSearch}},[t._v("搜索")])],1)],1)],1)],1)],1),a("el-card",{attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商品列表")])]),a("el-radio-group",{staticStyle:{width:"100%"},on:{change:t.radioChange},model:{value:t.productId,callback:function(e){t.productId=e},expression:"productId"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"productTable",staticStyle:{width:"100%"},attrs:{data:t.goodsData,height:"400"}},[a("el-table-column",{attrs:{fixed:"",type:"index",label:"序号"}}),a("el-table-column",{attrs:{label:"选择"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id}},[a("span")])]}}])}),a("el-table-column",{attrs:{label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{attrs:{src:t.row.pic}},[a("span")])]}}])}),a("el-table-column",{attrs:{label:"商品名称",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(" "+t._s(e.row.name)+" ")]),a("div",[t._v(" 品牌: "+t._s(e.row.brandName)+" ")]),a("p",[t._v(" "+t._s(e.row.description)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"商品价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(" 原价: "+t._s(e.row.originalPrice)+" ")]),a("div",[t._v(" 现价: "+t._s(e.row.price)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别"}}),a("el-table-column",{attrs:{prop:"weight",label:"重量"}})],1)],1)],1),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"page-size":t.pagniationParams.limit,total:t.pagniationParams.totalNum,layout:"total, sizes, prev, pager, next, jumper","page-sizes":t.pagniationParams.pageSizes,"current-page":t.pagniationParams.start},on:{"update:currentPage":function(e){return t.$set(t.pagniationParams,"start",e)},"update:current-page":function(e){return t.$set(t.pagniationParams,"start",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"mini"},on:{click:t.closeDialog}},[t._v("取 消")])],1)],1),a("SaleDetail",{ref:"SaleDetail",attrs:{form:t.form,productId:{id:t.productId}},on:{closeDialog:t.closeDialog}})],1)},d=[],u=a("5530"),m=(a("d3b7"),a("159b"),a("ac1f"),a("841c"),a("1b62")),p=a("b191"),f=a("782b"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"编辑限时活动",visible:t.isOpen},on:{"update:visible":function(e){t.isOpen=e}}},[a("el-form",{attrs:{model:t.form,inline:!0,"label-position":"top",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品原价","label-width":t.formLabelWidth}},[t._v(" "+t._s(t.form.price)+" ")])],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品名称","label-width":t.formLabelWidth}},[t._v(" "+t._s(t.form.name)+" ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"促销价格"}},[a("el-input-number",{attrs:{label:"描述文字"},on:{change:t.handleChange},model:{value:t.form.promotionPrice,callback:function(e){t.$set(t.form,"promotionPrice",e)},expression:"form.promotionPrice"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{attrs:{label:"描述文字"},on:{change:t.handleChange},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticClass:"myInput",attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.promotionStartTime,callback:function(e){t.$set(t.form,"promotionStartTime",e)},expression:"form.promotionStartTime"}})],1)])],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticClass:"myInput",attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.promotionEndTime,callback:function(e){t.$set(t.form,"promotionEndTime",e)},expression:"form.promotionEndTime"}})],1)])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"活动限购数量"}},[a("el-input",{model:{value:t.form.promotionPerLimit,callback:function(e){t.$set(t.form,"promotionPerLimit",e)},expression:"form.promotionPerLimit"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"商品图片"}},[a("el-image",{staticStyle:{width:"150px"},attrs:{src:t.form.pic,fit:"fill",lazy:!0}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelCurrentActivities}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.couldNext},on:{click:t.editCurrentActivity}},[t._v("确 定")])],1)],1)},g=[],b=(a("2ef0"),{name:"SaleDetail",props:{form:{type:Object,required:!0},productId:{type:Object,require:!0}},mixins:[],data:function(){return{isOpen:!1,formLabelWidth:"120px",couldNext:!1}},components:{},computed:{},created:function(){},methods:{openDia:function(){this.isOpen=!0},handleChange:function(t){console.log(t)},editCurrentActivity:function(){var t=this;console.log(this.form),console.log(this.productId.id),this.$confirm("是否确认新增最热推荐商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.couldNext=!0,s(Object(u["a"])(Object(u["a"])({},t.form),{},{productId:t.productId.id})).then((function(e){console.log(e),e.success?(t.isOpen=!1,t.isShowDialog=!1,t.productId.id="",t.$emit("closeDialog"),t.$message.success("添加成功")):t.$message.error("添加失败"),t.couldNext=!1}))}))},cancelCurrentActivities:function(){this.isOpen=!1}}}),v=b,y=a("2877"),S=Object(y["a"])(v,h,g,!1,null,"b94807ba",null),w=S.exports,j={name:"AddAdlist",mixins:[m["a"]],data:function(){return{isEditOpen:!1,form:{productId:"",promotionPrice:"",promotionPerLimit:"",sort:"",promotionStartTime:"",promotionEndTime:""},productId:"",loading:!1,isShowDialog:!1,goodsData:[],brandList:[],search:{productSn:"",publishStatus:"",verifyStatus:"",name:""}}},components:{SaleDetail:w},computed:{},created:function(){this.productsByPage(),this.findAllBrand()},methods:{radioChange:function(t){var e=this;console.log(t),this.productId=t,this.goodsData.forEach((function(a){a.id===t&&(e.form=a)})),this.$refs.SaleDetail.openDia()},findAllBrand:function(){var t=this;Object(f["e"])().then((function(e){var a=e.data;t.brandList=a.items}))},productsByPage:function(){var t=this,e={};for(var a in this.search)Object.hasOwnProperty.call(this.search,a)&&(e[a]=this.search[a]);this.loading=!0,Object(p["c"])(this.pagniationParams.start,this.pagniationParams.limit,Object(u["a"])({},e)).then((function(e){var a=e.success,n=e.data,o=e.message;console.log(e),a?(t.pagniationParams.totalNum=n.total,t.goodsData=n.rows,t.loading=!1):(t.$message.error(o),t.loading=!1)}))},openDialog:function(){this.isShowDialog=!0},closeDialog:function(){this.isShowDialog=!1},doReset:function(){this.pagniationParams.start=1,this.search=this.$options.data().search,this.productsByPage()},doSearch:function(){this.pagniationParams.start=1,this.productsByPage()},handleSizeChange:function(t){this.limit=t,this.start=1,this.productsByPage()},handleCurrentChange:function(t){this.start=t,this.productsByPage()}}},x=j,P=Object(y["a"])(x,c,d,!1,null,"86226cc2",null),O=P.exports,_={name:"list",components:{AddAdlist:O},data:function(){return{loading:!1,totalListMedia:6,recommendsList:[],currentPage:1,pagesize:6}},created:function(){this.getRecommends(),this.getListMedia()},methods:{showAdlist:function(){this.$refs.AddAdlists.openDialog()},delRecommend:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l(t).then((function(t){var a=t.success,n=t.message;a?e.getRecommends():e.$message.error(n)}))})).catch((function(){console.log("取消删除")}))},handleSizeChange:function(t){this.pagesize=t,this.currentPage=1,this.getListMedia()},handleCurrentChange:function(t){this.currentPage=t,this.getListMedia()},getListMedia:function(){var t=this;i().then((function(e){console.log(e.data),t.recommendsList=e.data.items,t.totalListMedia=e.data.items.length}))},getRecommends:function(){var t=this;this.loading=!0,i().then((function(e){var a=e.success,n=e.data,o=e.message;if(a){var r=n.items;t.recommendsList=r}else t.$message.error(o);t.loading=!1}))}},mounted:function(){}},k=_,A=(a("2058"),Object(y["a"])(k,n,o,!1,null,"715b4498",null));e["default"]=A.exports},"0c6d":function(t,e,a){"use strict";a("d3b7");var n=a("bc3a"),o=a.n(n),r=a("5c96"),i=a("4360"),l=a("2f4d"),s=void 0,c=o.a.create({baseURL:"http://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(t){return Object(l["a"])()&&(t.headers["token"]=Object(l["a"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),c.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(r["Message"])({message:e.message||"Error",type:"error",duration:5e3}),20002===e.code&&(Object(l["c"])(),Object(l["d"])(),s.$router.push("/login")),50008!==e.code&&50012!==e.code&&50014!==e.code||r["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){i["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(r["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=c},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1b62":function(t,e,a){"use strict";var n=a("2f4d");e["a"]={data:function(){return{uploadFileOss:"/lejuAdmin/material/uploadFileOssSave",uploadUrl1:"/lejuAdmin/material/uploadFileOss",uploadUrl:"/lejuAdmin/material/uploadFileOssSave",uploadHeaders:{token:Object(n["a"])()},pagniationParams:{start:1,limit:10,totalNum:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"loading.....",spinner:"el-icon-loading"}}},computed:{token:function(){return{token:Object(n["a"])()}}}}},2058:function(t,e,a){"use strict";a("d3cf")},"782b":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"f",(function(){return s})),a.d(e,"g",(function(){return c})),a.d(e,"d",(function(){return l})),a.d(e,"c",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"b",(function(){return d}));a("99af");var n=a("0c6d");function o(){return Object(n["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function r(t){return Object(n["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function i(t,e){return Object(n["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e),method:"get"})}function l(t){return Object(n["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function s(t){return Object(n["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}function d(){return Object(n["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}},"841c":function(t,e,a){"use strict";var n=a("d784"),o=a("825a"),r=a("1d80"),i=a("129f"),l=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var r=o(t),s=String(this),c=r.lastIndex;i(c,0)||(r.lastIndex=0);var d=l(r,s);return i(r.lastIndex,c)||(r.lastIndex=c),null===d?-1:d.index}]}))},b191:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r}));a("99af");var n=a("0c6d");function o(t,e,a){return Object(n["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:a})}function r(t){return Object(n["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:t})}},d3cf:function(t,e,a){}}]);